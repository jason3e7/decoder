<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="css/bootstrap.min.css">
  <script src="js/jquery-3.3.1.min.js"></script>
  <title>Decoder</title>
</head>

<body>
<div class="jumbotron">
  <div class="container">
    <h1 class="display-3">Decoder</h1>
  </div>
</div>
<div class="container">
  <div class="input-group">
    <input type="text" class="form-control" placeholder="encode text" id="encodeText">
    <div class="input-group-append">
      <button class="btn btn-primary" type="button" id="decode">Decode</button>
    </div>
  </div>
  <div id="output">
  </div>
</div>

<script type="text/javascript">
  function bin2ascii(text) {
    var output = "";
    for (var i = 0 ; i < text.length; i+= 8) {
      var c = 0;
      for (var j=0; j < 8 ; j++) {
        c <<= 1;
        c |= parseInt(text[i + j]);
      }
      output += String.fromCharCode(c);
    }
    return output;
  }

  function hex2ascii(text) {
    var output = "";
    for (var i = 0; (i < text.length && text.substr(i, 2) !== '00'); i += 2)
      output += String.fromCharCode(parseInt(text.substr(i, 2), 16));
    return output;
  }

  function isASCII(str) {
      return /^[\x00-\x7F]*$/.test(str);
  }

  var encodes = [{
  	"header" : "base64",
  	"funcname" : "atob"
  }, {
    "header" : "binary",
  	"funcname" : "bin2ascii"
  }, {
    "header" : "hex",
  	"funcname" : "hex2ascii"
  } ];

  document.getElementById('decode').onclick = function(){
  	var text = document.getElementById('encodeText').value;
  	$("#output").empty();
    encodes.forEach(function(e) {
      var card_header = e.header;
      var card_title = "";
      var card_text = "";

      try {
        card_text = window[e.funcname](text);
        if (isASCII(card_text)) {
          card_title = "text in ascii";
        } else {
          card_title = "text not in ascii";
        }
      } catch(err) {
      	card_title = "text decode error";
      	card_text = err.message;
      }

      html = '<br><div class="card"><div class="card-header">' + card_header + '</div>';
      html += '<div class="card-body"><h5 class="card-title">' + card_title + '</h5>';
      html += '<p class="card-text">' + card_text + '</p></div>';

      $("#output").append(html);

    });
  };
</script>

<link rel="stylesheet" href="js/bootstrap.min.js">
</body>

</html>